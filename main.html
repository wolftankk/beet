<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Beet主控制区</title>
		<meta name="description" content="" >
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<link rel="stylesheet" type="text/css" href="resources/css/ext-all.css" />
		<link rel="stylesheet" type="text/css" href="resources/css/beet.css" />

		<!-- let the stupid ie suport html5 -->
		<!--[if lt IE 9]>
		<script src="js/html5.js"></script>
		<![endif]-->
		<!-- load yahoo and my js -->
		<script type="text/javascript" src="js/my/yahoo-min.js"></script>
		<script type="text/javascript" src="js/my/json-min.js"></script>
		<script type="text/javascript" src="js/my/event-min.js"></script>
		<script type="text/javascript" src="js/my/connection-min.js"></script>
		<script type="text/javascript" src="js/my/utf.js"></script>
		<script type="text/javascript" src="js/my/MyCustomerLib_intf.js"></script>
		<script type="text/javascript" src="js/my/xxtea.js"></script>

		<script type="text/javascript" src="js/bootstrap.js"></script>
		<script type="text/javascript" src="js/ext-lang-zh_CN.js"></script>
		<script type="text/javascript" src="js/beet/beet_core.js"></script>
		<script type="text/javascript" src="js/beet/beet_config.js"></script>
		<script type="text/javascript" src="js/beet/beet_plugins.js"></script>
		<script type="text/javascript" src="js/beet/beet.js"></script>
	</head>
	<body>
		<header id="header">
		</header>
		<section id="viewport">
		</section>
		<footer>
			<script type="text/javascript">
				var userId;
				Ext.onReady(function(){
					Beet.navigationbar = Ext.create("Beet.apps.Menu.Panel");
					Beet.workspace = Ext.create("Beet.apps.Viewport");
					
					var customerServer = Beet.constants.customerServer, sessionId;
					customerServer.GetSessionID({
						success: function(sid){
							sessionId = sid;
							Ext.util.Cookies.set("sessionId", sid);
						},
						failure: function(error){
							Ext.Msg.alert("警告", "无法链接到服务器! " + error["message"]);
						}
					});

					userId = Ext.util.Cookies.get("userId");
					if (!userId){
						//window.location = "index.html";
					}
					/*
					dataview = Ext.create("Beet.apps.Grid.DataView", {
						store : 'Beet.apps.Grid.Store.CRecord'
					})
					*/
					/*
					function userLogin() {
						mls.Login("admin", xxtea_encrypt('admin'), '', '' ,{
							success: function(res) { 
								userId = res;
							},
							failure: function(error) {
								console.log(error);
							}
						})
					}

					if (!userId){
						Ext.defer(userLogin, 250)
					}

					Ext.defer(function(){
						mls.GetSessionID({
							success: function(res){
								dataview.storeProxy.on("beforeload", function(store){
									store.proxy.extraParams = {SessionID : res, Where: '', isClean: false}	
								})
								dataview.storeProxy.load({params: { start: 0, limit: 50 }});
							},
							failure: function(error){
							}
						})
					}, 2000)
					*/
				});
	
			</script>
		</footer>	
	</body>
</html>
